<?xml version="1.0" encoding="UTF-8" ?>
<!-- OpenManipulator X1000 (Arm) -->
<robot name="arm" xmlns:xacro="http://ros.org/wiki/xacro">
  <xacro:include filename="$(find sobit_light_description)/urdf/arm/arm.transmission.xacro" />
  <xacro:macro name="arm" params="prefix parent">

    <!-- Joint 0: Platform -->
    <joint name="${prefix}_platform_joint" type="fixed">
      <parent link="${parent}"/>
      <child link="${prefix}_platform_link"/>
      <origin xyz="0.122 0.0 0.0" rpy="0 0 0"/>
    </joint>

    <!-- Link 0: Platform -->
    <link name="${prefix}_platform_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <geometry>
          <mesh filename="file://$(find sobit_light_description)/meshes/arm/omx1_link_base.stl" scale="0.001 0.001 0.001"/>
        </geometry>
        <material name="grey"/>
      </visual>

      <!-- TODO: Collision with simple geometry -->
      <collision>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <geometry>
          <mesh filename="file://$(find sobit_light_description)/meshes/arm/omx1_link_base.stl" scale="0.001 0.001 0.001"/>
        </geometry>
      </collision>

      <!-- TODO: Inertial with simple geometry -->
      <inertial>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <mass value="0.2" />
        <inertia ixx="1.0" ixy="0.0" ixz="1.0"
                iyy="1.0" iyz="0.0"
                izz="1.0" />
      </inertial>
    </link>

    <!-- Joint 1: Base -->
    <joint name="${prefix}_base_joint" type="fixed">
      <parent link="${prefix}_platform_link"/>
      <child link="${prefix}_base_link"/>
      <origin xyz="${-0.0112-0.016/2} 0.0 0.008" rpy="0 0 0"/>
    </joint>

    <!-- Link 1: Base -->
    <link name="${prefix}_base_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <geometry>
          <mesh filename="file://$(find sobit_light_description)/meshes/arm/omx1_link1.stl" scale="0.001 0.001 0.001"/>
        </geometry>
        <material name="grey"/>
      </visual>

      <collision>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <geometry>
          <mesh filename="file://$(find sobit_light_description)/meshes/arm/omx1_link1.stl" scale="0.001 0.001 0.001"/>
        </geometry>
      </collision>

      <inertial>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <mass value="0.2" />
        <inertia ixx="1.0" ixy="0.0" ixz="1.0"
                iyy="1.0" iyz="0.0"
                izz="1.0" />
      </inertial>
    </link>

    <!-- Joint 2: Shoulder -->
    <joint name="${prefix}_1_joint" type="revolute">
      <parent link="${prefix}_base_link"/>
      <child link="${prefix}_1_link"/>
      <origin xyz="0.0 0.0 0.0465" rpy="0 ${M_PI/2} 0"/>
      <axis xyz="0 0 1"/>
      <limit velocity="4.8" effort="1" lower="${-M_PI}" upper="${M_PI}" />
    </joint>

    <!--  Link 2: Shoulder -->
    <link name="${prefix}_1_link">
      <visual>
        <origin xyz="0 0 0.0" rpy="0 0 ${M_PI/2}"/>
        <geometry>
          <mesh filename="file://$(find sobit_light_description)/meshes/arm/omx1_link2.stl" scale="0.001 0.001 0.001"/>
        </geometry>
        <material name="grey"/>
      </visual>

      <collision>
        <origin xyz="0 0 0.0" rpy="0 0 ${M_PI/2}"/>
        <geometry>
          <mesh filename="file://$(find sobit_light_description)/meshes/arm/omx1_link2.stl" scale="0.001 0.001 0.001"/>
        </geometry>
      </collision>

      <inertial>
        <origin xyz="0 0 0.0" rpy="0 0 ${M_PI/2}"/>
        <mass value="0.2" />
        <inertia ixx="1.0" ixy="0.0" ixz="1.0"
                iyy="1.0" iyz="0.0"
                izz="1.0" />
      </inertial>
    </link>

    <!--  Joint 3: Upper Arm -->
    <joint name="${prefix}_2_joint" type="revolute">
      <parent link="${prefix}_1_link"/>
      <child link="${prefix}_2_link"/>
      <origin xyz="0.0 0.0 0.05095" rpy="0 0 0"/>
      <axis xyz="0 1 0"/>
      <limit velocity="4.8" effort="1" lower="${-M_PI/2}" upper="${M_PI/2}" />
    </joint>

    <!--  Link 3: Upper Arm -->
    <link name="${prefix}_2_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <geometry>
          <mesh filename="file://$(find sobit_light_description)/meshes/arm/omx1_link3.stl" scale="0.001 0.001 0.001"/>
        </geometry>
        <material name="grey"/>
      </visual>

      <collision>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <geometry>
          <mesh filename="file://$(find sobit_light_description)/meshes/arm/omx1_link3.stl" scale="0.001 0.001 0.001"/>
        </geometry>
      </collision>

      <inertial>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <mass value="0.2" />
        <inertia ixx="1.0" ixy="0.0" ixz="1.0"
                iyy="1.0" iyz="0.0"
                izz="1.0" />
      </inertial>
    </link>

    <!--  Joint 4: Lower Arm -->
    <joint name="${prefix}_3_joint" type="revolute">
      <parent link="${prefix}_2_link"/>
      <child link="${prefix}_3_link"/>
      <origin xyz="0.022 -0.0 0.128" rpy="0 0 0"/>
      <axis xyz="0 1 0"/>
      <limit velocity="4.8" effort="1" lower="${-M_PI/2}" upper="${M_PI/2}" />
    </joint>

    <!--  Link 4: Lower Arm -->
    <link name="${prefix}_3_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <geometry>
          <mesh filename="file://$(find sobit_light_description)/meshes/arm/omx1_link4.stl" scale="0.001 0.001 0.001"/>
        </geometry>
        <material name="grey"/>
      </visual>

      <collision>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <geometry>
          <mesh filename="file://$(find sobit_light_description)/meshes/arm/omx1_link4.stl" scale="0.001 0.001 0.001"/>
        </geometry>
      </collision>

      <inertial>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <mass value="0.2" />
        <inertia ixx="1.0" ixy="0.0" ixz="1.0"
                iyy="1.0" iyz="0.0"
                izz="1.0" />
      </inertial>
    </link>

    <!--  Joint 5: Forearm Upper -->
    <joint name="${prefix}_4_joint" type="revolute">
      <parent link="${prefix}_3_link"/>
      <child link="${prefix}_4_link"/>
      <origin xyz="0.0835 0.0 0.0" rpy="0 0 0"/>
      <axis xyz="1 0 0"/>
      <limit velocity="4.8" effort="1" lower="${-M_PI}" upper="${M_PI}" />
    </joint>

    <!--  Link 5: Forearm Upper -->
    <link name="${prefix}_4_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <geometry>
          <mesh filename="file://$(find sobit_light_description)/meshes/arm/omx1_link5.stl" scale="0.001 0.001 0.001"/>
        </geometry>
        <material name="grey"/>
      </visual>

      <collision>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <geometry>
          <mesh filename="file://$(find sobit_light_description)/meshes/arm/omx1_link5.stl" scale="0.001 0.001 0.001"/>
        </geometry>
      </collision>

      <inertial>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <mass value="0.2" />
        <inertia ixx="1.0" ixy="0.0" ixz="1.0"
                iyy="1.0" iyz="0.0"
                izz="1.0" />
      </inertial>
    </link>

    <!--  Joint 6: Forearm Lower -->
    <joint name="${prefix}_5_joint" type="revolute">
      <parent link="${prefix}_4_link"/>
      <child link="${prefix}_5_link"/>
      <origin xyz="0.0405 0.0 0.0" rpy="0 0 0"/>
      <axis xyz="0 1 0"/>
      <limit velocity="4.8" effort="1" lower="${-M_PI/2}" upper="${M_PI/2}" />
    </joint>

    <!--  Link 6: Forearm Lower -->
    <link name="${prefix}_5_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <geometry>
          <mesh filename="file://$(find sobit_light_description)/meshes/arm/omx1_link6.stl" scale="0.001 0.001 0.001"/>
        </geometry>
        <material name="grey"/>
      </visual>

      <collision>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <geometry>
          <mesh filename="file://$(find sobit_light_description)/meshes/arm/omx1_link6.stl" scale="0.001 0.001 0.001"/>
        </geometry>
      </collision>

      <inertial>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <mass value="0.2" />
        <inertia ixx="1.0" ixy="0.0" ixz="1.0"
                iyy="1.0" iyz="0.0"
                izz="1.0" />
      </inertial>
    </link>

    <!--  Joint 7: Wrist (Gripper Base) -->
    <joint name="${prefix}_6_joint" type="revolute">
      <parent link="${prefix}_5_link"/>
      <child link="${prefix}_6_link"/>
      <origin xyz="0.064 0 0.0" rpy="0 0 0"/>
      <axis xyz="1 0 0"/>
      <limit velocity="4.8" effort="1" lower="${-M_PI}" upper="${M_PI}" />
    </joint>

    <!--  Link 7: Wrist (Gripper Base) -->
    <link name="${prefix}_6_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <geometry>
          <mesh filename="file://$(find sobit_light_description)/meshes/arm/omx1_link7_gripper_base.stl" scale="0.001 0.001 0.001"/>
        </geometry>
        <material name="grey"/>
      </visual>

      <collision>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <geometry>
          <mesh filename="file://$(find sobit_light_description)/meshes/arm/omx1_link7_gripper_base.stl" scale="0.001 0.001 0.001"/>
        </geometry>
      </collision>

      <inertial>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <mass value="0.2" />
        <inertia ixx="1.0" ixy="0.0" ixz="1.0"
                iyy="1.0" iyz="0.0"
                izz="1.0" />
      </inertial>
    </link>

    <!--  Joint 8: Gripper -->
    <joint name="${prefix}_gripper_joint" type="fixed">
      <parent link="${prefix}_6_link"/>
      <child link="${prefix}_gripper_link"/>
      <origin xyz="0.05 0.0 0.0" rpy="0 0 0"/>
    </joint>

    <!--  Link 8: Gripper -->
    <link name="${prefix}_gripper_link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <geometry>
          <mesh filename="file://$(find sobit_light_description)/meshes/arm/omx1_link8_gripper.stl" scale="0.001 0.001 0.001"/>
        </geometry>
        <material name="grey"/>
      </visual>

      <collision>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <geometry>
          <mesh filename="file://$(find sobit_light_description)/meshes/arm/omx1_link8_gripper.stl" scale="0.001 0.001 0.001"/>
        </geometry>
      </collision>

      <inertial>
        <origin xyz="0 0 0" rpy="0 0 ${M_PI/2}"/>
        <mass value="0.2" />
        <inertia ixx="1.0" ixy="0.0" ixz="1.0"
                iyy="1.0" iyz="0.0"
                izz="1.0" />
      </inertial>
    </link>


    <xacro:arm_transmission prefix="${prefix}" />

  </xacro:macro>
</robot>
